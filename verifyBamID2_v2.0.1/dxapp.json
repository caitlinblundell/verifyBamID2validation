{
  "name": "verifybamid2_v2.0.1",
  "title": "verifyBamID2_v2.0.1",
  "summary": "v2.0.1: Detects and estimates inter-sample contamination in an NGS run using pooled allele frequencies",
  "dxapi": "1.0.0",
  "version": "0.0.1",
  "inputSpec": [
    {
      "name": "reference_fasta",
      "label": "Reference genome",
      "class": "file",
      "optional": false,
      "default":{
        "$dnanexus_link": "file-B6ZY7VG2J35Vfvpkj8y0KZ01"
        },
      "patterns": [
        "*.fa", "*.fa.gz"
      ],
      "help": "The reference genome in FASTA format that was used to align the reads in the BAM file."
    },
    {
      "name": "reference_fasta_index",
      "label": "Reference genome index files",
      "class": "file",
      "optional": false,
      "default": 
      {
        "$dnanexus_link":
          "file-ByYgX700b80gf4ZY1GxvF3Jv"
      },
      "help": "Tar.gz archive containing index files (e.g. .fai) for the reference FASTA"
    },
    {
      "name": "input_bam",
      "label": "Aligned read data",
      "class": "file",
      "optional": false,
      "patterns": [
        "*.bam"
      ],
      "help": "The BAM file from read data to be checked for contamination."
    },
    {
      "name": "input_bam_index",
      "label": "BAM index file",
      "class": "file",
      "optional": false,
      "patterns": [
        "*.bai", ".bam.bai"
      ],
      "help": "The index file corresponding to the input BAM file."
    },
    {
      "name": "svd_array",
      "label": "SVD files (.bed, .mu, .UD, .V)",
      "class": "array:file",
      "optional": false,
      "default": [
        { "$dnanexus_link": "file-J3g4b4Q0Jy1kP8zj5VGbXkyg" },
        { "$dnanexus_link": "file-J3g4b4Q0Jy1Y3qkQY2571gVX" },
        { "$dnanexus_link": "file-J3g4b4Q0Jy1x2V3qx6956520" },
        { "$dnanexus_link": "file-J3g4b4Q0Jy1XjZ7Fg9G1bqgb" }
      ],
      "patterns": [
        "*.bed", "*.mu", "*.UD", "*.V"
      ],
      "help": "Resource files containing population reference data "
    },
    {
      "name": "additional_flags",
      "label": "Additional verifyBamID2 flags",
      "class": "string",
      "optional": true,
      "default": "",
      "help": "Additional flags to pass to verifyBamID2 if required"

    },
    {
      "name": "skip",
      "label": "skip",
      "help": "Skip this step if not required",
      "class": "boolean",
      "default": false,
      "optional": true
	  }
  ],
  "outputSpec": [
    {
      "name": "all_outputs",
      "label": "All outputs",
      "class": "array:file",
      "patterns": [
        "*.selfSM", "*.Ancestry", "*.Pileup"
      ],
      "help": ".selfSM: Output containing contamination estimates for the sample in the BAM file. .Ancestry: PC co-ordinates of the contaminating and intended samples in the BAM file."
    }
  ],
  "runSpec": {
    "interpreter": "bash",
    "file": "src/verifyBamID2_v2.0.1.sh",
    "distribution": "Ubuntu",
    "release": "24.04",
    "version": "0"
  },
  "access": {
    "network": [
      "*"
    ],
    "allProjects": "UPLOAD"
  },
  "regionalOptions": {
    "aws:us-east-1": {
      "systemRequirements": {
        "*": {
          "instanceType": "mem1_ssd1_v2_x4"
        }
      }
    }
  }
}
